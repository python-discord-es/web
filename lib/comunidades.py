comunidades = {
    "discord": {
        "Python Argentina": {
            "url": "https://discord.gg/f8ThGtJw",
            "img": "img/comunidades/python_argentina.jpg",
        },
        "Python Chile": {
            "url": "https://discord.gg/dTHMfJvauS",
            "img": "img/comunidades/python_chile.jpg",
        },
        "Python Colombia": {
            "url": "https://discord.gg/MGYQzUaA3S",
            "img": "img/comunidades/python_colombia.jpg",
        },
        "Python La Paz": {
            "url": "https://discord.gg/Fr2HUqv64P",
            "img": "img/comunidades/python_lapaz.jpg",
        },
        "Python Panama": {
            "url": "https://discord.gg/3mEkGHK2",
            "img": "img/comunidades/python_panama.jpg",
        },
    },
    "telegram": {
        "latam": {
            # Argentina
            "Python Argentina": {
                "url": "https://t.me/pythonargentina",
                "img": "img/comunidades/python_argentina.jpg",
            },
            "Python Norte": {
                "url": "https://t.me/pythonnorte",
                "img": "img/comunidades/python_norte.jpg",
            },
            # Bolivia
            "Python Bolivia": {
                "url": "https://t.me/PythonBolivia",
                "img": "img/comunidades/python_logo.png",
            },
            "Python La Paz": {
                "url": "https://t.me/pythonlapaz",
                "img": "img/comunidades/python_lapaz.jpg",
            },
            # Chile
            "Python Chile": {
                "url": "https://t.me/PythonChile",
                "img": "img/comunidades/python_chile.jpg",
            },
            # Colombia
            "Python Colombia": {
                "url": "https://t.me/pythoncolombia",
                "img": "img/comunidades/python_colombia.jpg",
            },
            # Costa Rica
            # Cuba
            "Python Cuba": {
                "url": "https://t.me/pythoncuba",
                "img": "img/comunidades/python_cuba.jpg",
            },
            # Ecuador
            "Python Ecuador": {
                "url": "https://t.me/PythonEcuador",
                "img": "img/comunidades/python_ecuador.jpg",
            },
            # El Salvador
            # Guatemala
            # Guinea Ecuatorial
            # Honduras
            # México
            "Python México": {
                "url": "https://t.me/PythonMexico",
                "img": "img/comunidades/python_mexico.jpg",
            },
            "Python CDMX": {
                "url": "https://t.me/pythonCDMX",
                "img": "img/comunidades/python_cdmx.jpg",
            },
            # Nicaragua
            "Python Nicaragua": {
                "url": "https://t.me/pythonNIC",
                "img": "img/comunidades/python_nicaragua.jpg",
            },
            # Panamá
            "Python Panamá": {
                "url": "https://t.me/PythonPanama",
                "img": "img/comunidades/python_panama.jpg",
            },
            # Paraguay
            "Python Paraguay": {
                "url": "https://t.me/pythonparaguay",
                "img": "img/comunidades/python_paraguay.jpg",
            },
            # Perú
            "Python Perú": {
                "url": "https://t.me/PytonPeru",
                "img": "img/comunidades/python_peru.jpg",
            },
            # República Dominicana
            # Uruguay
            "Python Uruguay": {
                "url": "https://t.me/PythonUruguay",
                "img": "img/comunidades/python_logo.png",
            },
            # Venezuela
            "Python Venezuela": {
                "url": "https://t.me/Python_Venezuela",
                "img": "img/comunidades/python_venezuela.jpg",
            },
        },
        "spain": {
            "Python Alicante": {
                "url": "https://t.me/python_alc",
                "img": "img/comunidades/python_alicante.jpg",
            },
            "Python Canarias": {
                "url": "https://t.me/joinchat/AJ7pmT-X0xZVPgWDIzGA-A",
                "img": "img/comunidades/python_canarias.jpg",
            },
            "Python Castilla y León": {
                "url": "https://t.me/PyCyL",
                "img": "img/comunidades/python_castillayleon.jpg",
            },
            "Python Catalunya": {
                "url": "https://t.me/pythoncatalunya",
                "img": "img/comunidades/python_logo.png",
            },
            "Python Coruña": {
                "url": "https://t.me/pythoncoruna",
                "img": "img/comunidades/python_coruna.jpg",
            },
            "Extre Python": {
                "url": "https://t.me/ExtrePython_grupo",
                "img": "img/comunidades/python_logo.png",
            },
            "Python Girona": {
                "url": "https://t.me/pygrn",
                "img": "img/comunidades/python_girona.jpg",
            },
            "Python Granada": {
                "url": "https://t.me/pythongrx",
                "img": "img/comunidades/python_granada.jpg",
            },
            "Python Guadalajara": {
                "url": "https://t.me/pythonguada",
                "img": "img/comunidades/python_logo.png",
            },
            "Python La Rioja": {
                "url": "https://t.me/pythonlarioja",
                "img": "img/comunidades/python_larioja.png",
            },
            "Python Madrid": {
                "url": "https://t.me/pythonmadrid",
                "img": "img/comunidades/python_madrid.jpg",
            },
            "Python Málaga": {
                "url": "https://t.me/python_malaga",
                "img": "img/comunidades/python_malaga.jpg",
            },
            "Python Sevilla": {
                "url": "https://t.me/joinchat/AgH9wQ4oQVIpbW_1gDvH-A",
                "img": "img/comunidades/python_logo.png",
            },
            "Python Valencia": {
                "url": "https://t.me/python_vlc",
                "img": "img/comunidades/python_valencia.jpg",
            },
            "Python Vigo": {
                "url": "https://t.me/+B9bb6mt07Uyp5Pj7",
                "img": "img/comunidades/python_vigo.png",
            },
            "Python Zaragoza": {
                "url": "https://t.me/PythonZaragoza",
                "img": "img/comunidades/python_zaragoza.jpg",
            },
        },
        "topics": {
            "Traducción de la documentación oficial de Python": {
                "url": "https://t.me/python_docs_es"
            },
            "Python Científico": {"url": "https://t.me/python_cientifico"},
            "SciPy Latinoamericano": {
                "url": "https://t.me/scipyla",
            },
            "AeroPython": {
                "url": "https://t.me/AeroPython",
            },
            "Django España": {
                "url": "https://t.me/DjangoEsp",
            },
            "Django Venezuela": {
                "url": "https://t.me/DjangoVE",
            },
            "Flask España": {
                "url": "https://t.me/FlaskEsp",
            },
            "Kivy Python (es)": {
                "url": "https://t.me/kivy_python_es",
            },
            "Odoo en español": {
                "url": "https://t.me/odoo_es",
            },
            "Python para docentes": {
                "url": "https://t.me/pythonparadocentes",
            },
            "Un Python al día (canal)": {
                "url": "https://t.me/UnPythonAlDia",
            },
            "Aprende Python (canal)": {
                "url": "https://t.me/aprendepython",
            },
            "Sólo Python": {
                "url": "https://t.me/Python_es",
            },
            "Tryton en español": {
                "url": "https://t.me/trytonespana",
            },
            "MicroPython": {
                "url": "https://t.me/micropython_es",
            },
            "Data en Español": {
                "url": "https://t.me/dataEspanol",
            },
        },
    },
}


def get_cards_from_dict(card, d):
    content = ""
    for name, values in d.items():
        content += card.format(
            comunidad_name=name,
            comunidad_url=values["url"],
            comunidad_img=values["img"],
        )
    return content


def get_list_from_dict(d):
    content = ""
    for name, values in d.items():
        content += f'<li>\n  <a href="{values["url"]}">{name}</a>\n</li>\n'
    return content


def get_comunidades_page(_content):

    begin = '<div class="row u-flex u-justify-center">'
    end = "</div>"
    card = None
    with open("template/comunidad-card.html", "r") as f:
        card = f.read()

    # Discord
    discord_content = get_cards_from_dict(card, comunidades["discord"])

    # Telegram (Latam)
    telegram_latam_content = get_cards_from_dict(card, comunidades["telegram"]["latam"])

    # Telegram (Spain)
    telegram_spain_content = get_cards_from_dict(card, comunidades["telegram"]["spain"])

    # Telegram (Topics)
    telegram_topics_content = get_list_from_dict(comunidades["telegram"]["topics"])

    return (
        _content.replace("COMUNIDADES_DISCORD", f"{begin}\n{discord_content}\n{end}")
        .replace(
            "COMUNIDADES_TELEGRAM_LATAM", f"{begin}\n{telegram_latam_content}\n{end}"
        )
        .replace(
            "COMUNIDADES_TELEGRAM_SPAIN", f"{begin}\n{telegram_spain_content}\n{end}"
        )
        .replace(
            "COMUNIDADES_TELEGRAM_TEMAS", f"<ul>\n{telegram_topics_content}\n</ul>"
        )
    )
